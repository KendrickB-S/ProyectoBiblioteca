<!DOCTYPE html>
<html
  lang="es"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Google Fonts: Montserrat -->
    <link
      href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap"
      rel="stylesheet"
    />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />

    <!-- Bootstrap Icons -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css"
      rel="stylesheet"
    />

    <!-- CSS propio con Thymeleaf -->
    <link rel="stylesheet" th:href="@{/src/style.css}" />
    <link rel="stylesheet" th:href="@{/src/app/layout/navbar/navbar.component.css}" />

    <title>Document</title>
  </head>
  <body>
    <div class="fondo"></div>
    <div class="navbar-container">
      <nav class="navbar">
        <img src="/img/logolibro.png" alt="Logo" />
        <a routerLink="/inicio">Inicio</a>
        <a routerLink="/catalogo">Catálogo</a>
        <a routerLink="/prestamos">Préstamos</a>
        <a routerLink="/contacto">Contacto</a>
        <a routerLink="/login" class="login-btn">
          Iniciar Sesión <i class="bi bi-person-fill"></i>
        </a>
      </nav>
    </div>

    <!-- Iconos flotantes -->
    <div class="iconos-flotantes">
      <div class="search-icon-container"><i class="bi bi-search"></i></div>
      <div class="prestamos-icon-container"><i class="bi bi-book-half"></i></div>
    </div>

    <!-- Sección Libros -->
    <section class="libros-section">
      <div class="fondo"></div>
      <div class="contenido">
        <h1><span class="blanco">Explora</span> <span class="celeste">Nuestra Biblioteca</span></h1>
        <div class="botones">
          <button class="blanco">Ver Catálogo</button>
          <button class="celeste">Novedades</button>
        </div>

        <div class="libros-grid">
          <img th:src="@{/img/libro7.jpg}" alt="Libro 1" />
          <img th:src="@{/img/libro3.jpg}" alt="Libro 2" />
          <img th:src="@{/img/libro5.jpg}" alt="Libro 3" />
        </div>
      </div>
    </section>

    <!-- Segunda sección -->
    <section class="container my-5 text-center text-white">
      <div class="row align-items-center">
        <div class="col-lg-6 mb-4 mb-lg-0 seccion2-img">
          <img
            th:src="@{/img/libroseccion2.png}"
            class="img-fluid rounded-4 shadow"
            alt="Lectura"
          />
        </div>
        <div class="col-lg-6 text-start seccion2-texto">
          <h2 class="fw-bold mb-3">Fomentamos la <span class="text-info">lectura digital</span></h2>
          <p class="lead">
            Nuestra plataforma ofrece acceso a una amplia colección de libros digitales, permitiendo
            a estudiantes y docentes explorar, aprender y compartir conocimiento desde cualquier
            dispositivo.
          </p>
          <button class="btn btn-info text-white px-4 py-2 mt-3 fw-semibold">
            Explorar más <i class="bi bi-arrow-right-circle"></i>
          </button>
        </div>
      </div>
    </section>

    <!-- Secciones 3, 4 y 5 (carruseles) -->
    <section class="container my-5">
      <div class="d-flex align-items-center mb-3">
        <h3 class="me-auto">Recomendados</h3>
      </div>
      <div class="carousel-container position-relative">
        <div class="carousel-track d-flex overflow-hidden" id="carouselTrack"></div>
        <button
          class="carousel-btn prev btn btn-outline-secondary position-absolute top-50 start-0 translate-middle-y"
        >
          &#10094;
        </button>
        <button
          class="carousel-btn next btn btn-outline-secondary position-absolute top-50 end-0 translate-middle-y"
        >
          &#10095;
        </button>
      </div>
    </section>

    <section id="seccion4" class="container my-5">
      <div class="d-flex align-items-center mb-3">
        <h3 class="me-auto" id="subtitulo4">Agregados recientemente</h3>
      </div>
      <div class="carousel-container position-relative">
        <div class="carousel-track d-flex overflow-hidden" id="carouselTrack4"></div>
        <button class="carousel-btn prev position-absolute top-50 start-0 translate-middle-y">
          &#10094;
        </button>
        <button class="carousel-btn next position-absolute top-50 end-0 translate-middle-y">
          &#10095;
        </button>
      </div>
    </section>

    <section id="seccion5" class="container my-5">
      <div class="d-flex align-items-center mb-3">
        <h3 class="me-auto" id="subtitulo5">Autores reconocidos</h3>
      </div>
      <div class="carousel-container position-relative">
        <div class="carousel-track d-flex overflow-hidden" id="carouselTrack5"></div>
        <button class="carousel-btn prev position-absolute top-50 start-0 translate-middle-y">
          &#10094;
        </button>
        <button class="carousel-btn next position-absolute top-50 end-0 translate-middle-y">
          &#10095;
        </button>
      </div>
    </section>

    <!-- Sección 6 -->
    <section id="seccion6" class="container my-5">
      <div class="text-center mb-4">
        <h3 class="subtitulo6">Explora nuestras categorías</h3>
      </div>
      <div class="enlaces-cuadro p-4 rounded">
        <div class="row g-3">
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Lo Mejor<span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Cuentos Top<span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Novelas Top<span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Novedades <span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item"
              >Existos Históricos <span class="flecha">&#8594;</span></a
            >
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Más Destacados <span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item">Materias <span class="flecha">&#8594;</span></a>
          </div>
          <div class="col-6 col-md-3">
            <a href="#" class="enlace-item"
              >Ultimas Tendencias <span class="flecha">&#8594;</span></a
            >
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
      <div class="container-fluid px-5">
        <div class="row">
          <div class="col-md-3 mb-4 text-center text-md-start">
            <h4 class="footer-logo mb-2">
              <span class="text-white">Book</span><span style="color: #0bb9d0">Store</span>
            </h4>
            <img
              th:src="@{/img/logolibro.png}"
              alt="Logo Book Store"
              class="footer-logo-img"
              width="80"
            />
          </div>
          <div class="col-md-3 mb-4 text-center text-md-start">
            <h5>Enlaces</h5>
            <ul class="list-unstyled">
              <li><a href="#" class="footer-link">Inicio</a></li>
              <li><a href="#" class="footer-link">Libros</a></li>
              <li><a href="#" class="footer-link">Ofertas</a></li>
              <li><a href="#" class="footer-link">Contacto</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-4 text-center text-md-start">
            <h5>Categorías</h5>
            <ul class="list-unstyled">
              <li><a href="#" class="footer-link">Lo Mejor</a></li>
              <li><a href="#" class="footer-link">Cuentos Top</a></li>
              <li><a href="#" class="footer-link">Novelas Pop</a></li>
              <li><a href="#" class="footer-link">Novedades Nuevas</a></li>
            </ul>
          </div>
          <div class="col-md-3 mb-4 text-center">
            <h5>Síguenos</h5>
            <div class="d-flex justify-content-center gap-3 mt-2">
              <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
              <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
              <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
              <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
            </div>
          </div>
        </div>

        <hr class="bg-secondary" />
        <div class="row">
          <div class="col text-center">
            <p class="mb-0 copyright">&copy; 2025 Book Store. Todos los derechos reservados.</p>
          </div>
        </div>
      </div>
    </footer>

    <script th:inline="javascript">
      /*SEGUNDA SECCION*/
      const seccion = document.querySelector('section.container');
      const imagen = seccion.querySelector('.seccion2-img img');
      const h2 = seccion.querySelector('.seccion2-texto h2');
      const lead = seccion.querySelector('.seccion2-texto .lead');
      const boton = seccion.querySelector('.seccion2-texto button.btn-info');

      window.addEventListener('scroll', () => {
        const top = seccion.getBoundingClientRect().top;
        const windowHeight = window.innerHeight;

        if (top < windowHeight * 0.85) {
          imagen.classList.add('animate');
          h2.classList.add('animate');
          lead.classList.add('animate');
          boton.classList.add('animate');
        }
      });

      /*SECCION3*/
      const libros = [
        { img: '/img/libro3.jpg', titulo: 'Libro 1' },
        { img: '/img/libro5.jpg', titulo: 'Libro 2' },
        { img: '/img/libro3.jpg', titulo: 'Libro 3' },
        { img: '/img/libro4.jpg', titulo: 'Libro 4' },
        { img: '/img/libro5.jpg', titulo: 'Libro 5' },
        { img: '/img/libro6.jpg', titulo: 'Libro 6' },
        { img: '/img/libro7.jpg', titulo: 'Libro 7' },
        { img: '/img/libro4.jpg', titulo: 'Libro 8' },
        { img: '/img/libro4.jpg', titulo: 'Libro 9' },
        { img: '/img/libro5.jpg', titulo: 'Libro 10' },
        { img: '/img/libro6.jpg', titulo: 'Libro 11' },
        { img: '/img/libro7.jpg', titulo: 'Libro 12' },
        { img: '/img/libro4.jpg', titulo: 'Libro 13' },
      ];

      const track = document.getElementById('carouselTrack');

      libros.forEach((libro) => {
        const card = document.createElement('div');
        card.classList.add('card', 'book-card');
        card.innerHTML = `
        <img src="${libro.img}" class="card-img-top" alt="${libro.titulo}">
        <div class="card-body p-2">
          <p class="card-text text-center" style="font-size: 0.7rem;">${libro.titulo}</p>
        </div>
      `;
        track.appendChild(card);
      });

      const prevBtn = document.querySelector('.carousel-btn.prev');
      const nextBtn = document.querySelector('.carousel-btn.next');
      const cardWidth = track.querySelector('.book-card').offsetWidth + 8;

      prevBtn.addEventListener('click', () =>
        track.scrollBy({ left: -cardWidth, behavior: 'smooth' })
      );
      nextBtn.addEventListener('click', () =>
        track.scrollBy({ left: cardWidth, behavior: 'smooth' })
      );

      const subtitulo = document.querySelector('.container h3');

      const observer = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              subtitulo.classList.add('visible');
              observer.unobserve(subtitulo);
            }
          });
        },
        { threshold: 0.5 }
      );

      observer.observe(subtitulo);

      /*SECCION 4 y 5 siguen la misma lógica que SECCION3*/

      const secciones = [
        {
          trackId: 'carouselTrack4',
          prevSelector: '#seccion4 .carousel-btn.prev',
          nextSelector: '#seccion4 .carousel-btn.next',
          subtituloId: 'subtitulo4',
        },
        {
          trackId: 'carouselTrack5',
          prevSelector: '#seccion5 .carousel-btn.prev',
          nextSelector: '#seccion5 .carousel-btn.next',
          subtituloId: 'subtitulo5',
        },
      ];

      secciones.forEach((sec) => {
        const trackSec = document.getElementById(sec.trackId);

        libros.forEach((libro) => {
          // usamos el mismo array de libros o uno distinto si quieres
          const card = document.createElement('div');
          card.classList.add('card', 'book-card');
          card.innerHTML = `
          <img src="${libro.img}" class="card-img-top" alt="${libro.titulo}">
          <div class="card-body p-2">
            <p class="card-text text-center" style="font-size: 0.7rem;">${libro.titulo}</p>
          </div>
        `;
          trackSec.appendChild(card);
        });

        const prevBtnSec = document.querySelector(sec.prevSelector);
        const nextBtnSec = document.querySelector(sec.nextSelector);
        const cardWidthSec = trackSec.querySelector('.book-card').offsetWidth + 8;

        prevBtnSec.addEventListener('click', () =>
          trackSec.scrollBy({ left: -cardWidthSec, behavior: 'smooth' })
        );
        nextBtnSec.addEventListener('click', () =>
          trackSec.scrollBy({ left: cardWidthSec, behavior: 'smooth' })
        );

        const subtituloSec = document.getElementById(sec.subtituloId);

        const observerSec = new IntersectionObserver(
          (entries) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                subtituloSec.classList.add('visible');
                observerSec.unobserve(subtituloSec);
              }
            });
          },
          { threshold: 0.5 }
        );

        observerSec.observe(subtituloSec);
      });
    </script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
